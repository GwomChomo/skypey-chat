(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1104:function(e,t,a){},1106:function(e,t,a){},1107:function(e,t,a){},1108:function(e,t,a){},1109:function(e,t,a){},1110:function(e,t,a){},1111:function(e,t,a){},1128:function(e,t,a){},1129:function(e,t,a){},1130:function(e,t,a){},1131:function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a.n(r),c=a(13),i=a.n(c),o=a(22),l=a(6),u=a(45),m=a(54),d=a(55),p=a(11),g=(n=10,Array.from({length:n},function(){return f()})),h=p.mapKeys(g,"user_id"),v=function(e){var t={};return p.forEach(g,function(a){var n;t[a.user_id]=Object(l.a)({},p.mapKeys((n=e,Array.from({length:n},function(e,t){return{number:t,text:m.sentence(),is_user_msg:d.random.boolean()}})),"number"))}),t};f(),v(10);function f(){return{name:d.name.findName(),email:d.internet.email(),profile_pic:d.internet.avatar(),status:m.sentence(),user_id:u.generate()}}var E="SET_ACTIVE_USER_ID",y="SET_TYPING_VALUE",b="SET_EDITING",_="SEND_MESSAGE",O="SEARCH_CONTACTS",N="DELETE_MESSAGE",j="EDIT_MESSAGE";var S=a(12),w=a(11),I=a.n(w),k="".userId,C="".message,M="".allUserMessages,U="".number;var D=Object(o.a)({contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;arguments.length>1&&arguments[1];return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f();arguments.length>1&&arguments[1];return e},activeUserId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload;default:return e}},editing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v(10),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return k=t.payload.userId,C=t.payload.message,M=e[k],U=+Object.keys(M).pop()+1,Object(l.a)({},e,Object(S.a)({},k,Object(l.a)({},M,Object(S.a)({},U,{number:U,text:C,is_user_msg:!0,edited:!1}))));case N:return k=t.payload.userId,U=t.payload.number,delete(M=I.a.cloneDeep(e[k]))[U],Object(l.a)({},e,Object(S.a)({},k,Object(l.a)({},M)));case j:return k=t.payload.userId,C=t.payload.message,U=t.payload.messageId,(M=I.a.cloneDeep(e[k]))[U].text=C,M[U].edited=!0,Object(l.a)({},e,Object(S.a)({},k,Object(l.a)({},M)));default:return e}},typing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload;case _:case j:return"";default:return e}},searching:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;default:return e}}}),T=Object(o.b)(D),A=(a(1104),a(1105),function(e){return{type:E,payload:e}}),R=function(e){return{type:y,payload:e}},x=function(e){return{type:b,payload:e}};a(1106),a(1107);function H(e){var t=e.user_id;T.dispatch(A(t))}var P=function(e){var t=e.user,a=t.name,n=t.profile_pic,r=t.status;return s.a.createElement("div",{className:"User",onClick:H.bind(null,t)},s.a.createElement("img",{src:n,alt:a,className:"User__pic"}),s.a.createElement("div",{className:"User__details"},s.a.createElement("p",{className:"User__details-name"},a),s.a.createElement("p",{className:"User__details-status"},r)))},B=function(e){var t=e.user,a=t.name,n=t.profile_pic;return s.a.createElement("section",{id:"main-user"},s.a.createElement("img",{src:n,alt:a,className:"user-pic"}))},G=function(e){return s.a.createElement("div",null,s.a.createElement("input",{value:e.value,id:"main-user-search",placeholder:"Search or start new chat",onChange:function(e){var t;T.dispatch((t=e.target.value,{type:O,payload:t}))}}))},F=function(e){var t=e.contacts;return s.a.createElement("div",{className:"sidebar-chats"},t.map(function(e){return s.a.createElement(P,{user:e,key:e.user_id})}))},L=function(e){var t=e.contacts,a=e.user,n=T.getState().searching,r=t.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())});return s.a.createElement("aside",{className:"Sidebar"},s.a.createElement("div",{className:"user-section-container"},s.a.createElement(B,{user:a}),s.a.createElement(G,{value:n})),s.a.createElement(F,{contacts:r}))},W=(a(1108),a(1109),function(e){var t=e.user,a=t.name,n=t.profile_pic,r=t.status,c=a.split(" ")[0];return s.a.createElement("div",{className:"Empty"},s.a.createElement("h1",{className:"Empty__name"},"Welcome, ",c," "),s.a.createElement("img",{src:n,alt:a,className:"Empty__img"}),s.a.createElement("p",{className:"Empty__status"},s.a.createElement("b",null,"Status:")," ",r),s.a.createElement("button",{className:"Empty__btn"},"Start a conversation"),s.a.createElement("p",{className:"Empty__info"},"Search for someone to start chatting with or go to Contacts to see who is available"))}),J=(a(1110),function(e){var t=e.userName,a=e.status;return s.a.createElement("header",{className:"Header"},s.a.createElement("h1",{className:"Header__name"},t),s.a.createElement("p",{className:"Header__status"},a))}),K=a(16),V=a(17),z=a(19),Y=a(18),$=a(4),q=a(20),Q=(a(1111),a(34)),X=a(35),Z=a(1134),ee=a(1133),te=function(e){function t(){return Object(K.a)(this,t),Object(z.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.trigger,a=e.isOpen,n=e.placement,r=e.target,c=e.toggle;return s.a.createElement(Z.a,{trigger:t,isOpen:a,placement:n,target:r,toggle:c},s.a.createElement(ee.a,null,this.props.children))}}]),t}(r.Component),ae=function(e){function t(e){var a;return Object(K.a)(this,t),(a=Object(z.a)(this,Object(Y.a)(t).call(this,e))).state={isHovered:!1,popoverOpen:!1},a.handleDeleteMessage=a.handleDeleteMessage.bind(Object($.a)(a)),a.handleEditMessage=a.handleEditMessage.bind(Object($.a)(a)),a.togglePopover=a.togglePopover.bind(Object($.a)(a)),a}return Object(q.a)(t,e),Object(V.a)(t,[{key:"togglePopover",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"handleDeleteMessage",value:function(){var e,t;T.dispatch((e=this.props.user_id,t=this.props.message.number,{type:N,payload:{userId:e,number:t}}))}},{key:"handleEditMessage",value:function(){T.dispatch(R(this.props.message.text)),T.dispatch(x(this.props.message.number)),this.togglePopover()}},{key:"render",value:function(){var e=this.props.message,t=e.text,a=e.is_user_msg,n=e.number,r=e.edited,c="popover".concat(this.props.user_id).concat(n);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"message_container",className:"Chat ".concat(a?"is-user-msg":""," ")},t,s.a.createElement("div",{id:"message_container_inner"},s.a.createElement(re,{id:c,className:"show chat-menu-icon"}),r&&s.a.createElement("span",{style:{fontSize:"0.7rem",fontStyle:"italic",color:"gray"}},"Edited"))),s.a.createElement(te,{trigger:"legacy",isOpen:this.state.popoverOpen,placement:"top",target:c,toggle:this.togglePopover},s.a.createElement("ul",{className:"list-group list-group-flush"},s.a.createElement("li",{className:"list-group-item",onClick:this.handleDeleteMessage},"Delete Message"),a&&s.a.createElement("li",{className:"list-group-item",onClick:this.handleEditMessage},"Edit Message"))))}}]),t}(r.Component),ne=function(e){function t(e){var a;return Object(K.a)(this,t),(a=Object(z.a)(this,Object(Y.a)(t).call(this,e))).scrollToBottom=function(){a.chatsRef.current.scrollTop=a.chatsRef.current.scrollHeight},a.chatsRef=s.a.createRef(),a}return Object(q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Chats",ref:this.chatsRef},this.props.messages.map(function(t){return s.a.createElement(ae,{message:t,key:t.number,user_id:e.props.user_id})}))}}]),t}(r.Component),re=function(e){var t=e.id,a=e.className;return s.a.createElement("span",{id:t,className:a},s.a.createElement(Q.a,{icon:X.a}))},se=ne,ce=(a(1128),a(1129),function(e){var t=e.value,a=T.getState();return s.a.createElement("form",{className:"Message",onSubmit:function(e){e.preventDefault();var t=a.typing,n=a.activeUserId,r=a.editing;if(t.trim().length>0){if(r)return T.dispatch({type:j,payload:{userId:n,message:t,messageId:r}}),void T.dispatch(x(""));T.dispatch(function(e,t){return{type:_,payload:{message:e,userId:t}}}(t,n))}}},s.a.createElement("input",{className:"Message__input",onChange:function(e){T.dispatch(R(e.target.value))},value:t,placeholder:"write a message"}))}),ie=function(e){var t=e.activeUserId,a=T.getState(),n=a.contacts[t],r=n.name,c=n.status,i=a.messages[t],o=a.typing;return s.a.createElement("div",{className:"ChatWindow"},s.a.createElement(J,{userName:r,status:c}),s.a.createElement(se,{messages:I.a.values(i),user_id:t}),s.a.createElement(ce,{value:o}))},oe=function(e){var t=e.user,a=e.activeUserId;return s.a.createElement("main",{className:"Main"},a?s.a.createElement(ie,{activeUserId:a}):s.a.createElement(W,{user:t,activeUserId:a}))};a(1130);var le=function(){var e=T.getState(),t=e.contacts,a=e.user,n=e.activeUserId;return s.a.createElement("div",{className:"App"},s.a.createElement(L,{contacts:I.a.values(t),user:a}),s.a.createElement(oe,{user:a,activeUserId:n}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=function(){me(),i.a.render(s.a.createElement(le,null),document.getElementById("root"))},me=function(){console.log("%c Rendered with \ud83d\udc49 \ud83d\udc49\ud83d\udc47","background: purple; color: #FFF"),console.log(T.getState())};ue(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}),T.subscribe(ue)},40:function(e,t,a){e.exports=a(1131)}},[[40,1,2]]]);
//# sourceMappingURL=main.ddf11677.chunk.js.map